DROP TABLE IF EXISTS order_items CASCADE;
DROP TABLE IF EXISTS images CASCADE;
DROP TABLE IF EXISTS orders CASCADE;
DROP TABLE IF EXISTS products CASCADE;
DROP TABLE IF EXISTS users CASCADE;
DROP TABLE IF EXISTS admins CASCADE;
DROP TABLE IF EXISTS reviews CASCADE;
DROP TABLE IF EXISTS messages CASCADE;


CREATE TABLE admins (
    id UUID PRIMARY KEY,
    email VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    role VARCHAR(50) NOT NULL CHECK (role IN ('ROLE_USER','ROLE_ADMIN'))
);

CREATE TABLE products (
    product_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    category VARCHAR(50) NOT NULL,
    description TEXT,
    price INTEGER NOT NULL,
    shipping_cost INTEGER NOT NULL,
    brand VARCHAR(50),
    stock_status VARCHAR(50) NOT NULL,
    shipping_time INTEGER,
    active BOOLEAN NOT NULL DEFAULT TRUE
);

CREATE TABLE images (
    image_id UUID PRIMARY KEY,
    url TEXT NOT NULL,
    product_id BIGINT REFERENCES products(product_id) ON DELETE CASCADE
);

CREATE TABLE users (
    id UUID PRIMARY KEY,
    email VARCHAR(100) NOT NULL UNIQUE,
    firstname VARCHAR(50),
    lastname VARCHAR(50),
    password VARCHAR(255) NOT NULL,
    role VARCHAR(50) NOT NULL,
    phone VARCHAR(50),
    postcode VARCHAR(20),
    address VARCHAR(255),
    active BOOLEAN NOT NULL DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE orders (
   id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
   order_number VARCHAR(50) UNIQUE,
   user_id UUID REFERENCES users(id) ON DELETE SET NULL,
   total_order_price NUMERIC(12,2) NOT NULL,
   ordered_date DATE,
   delivery_date DATE,
   order_status VARCHAR(50) NOT NULL,
   shipping_address VARCHAR(255) NOT NULL,
   payment_method VARCHAR(50)
);

CREATE TABLE order_items (
     id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
     order_id BIGINT NOT NULL REFERENCES orders(id) ON DELETE CASCADE,
     product_id BIGINT NOT NULL REFERENCES products(product_id) ON DELETE CASCADE,
     quantity INTEGER NOT NULL CHECK (quantity > 0),
     price NUMERIC(12,2)
);

CREATE TABLE messages (
   message_id UUID PRIMARY KEY,
   name VARCHAR(100),
   email VARCHAR(255),
   subject VARCHAR(255),
   message TEXT,
   created_at TIMESTAMP
);

CREATE TABLE reviews (
   review_id VARCHAR(100) PRIMARY KEY,
   product_id BIGINT NOT NULL REFERENCES products(product_id) ON DELETE CASCADE,
   user_id UUID REFERENCES users(id) ON DELETE SET NULL,
   rating INTEGER NOT NULL,
   comment TEXT,
   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

INSERT INTO products (name, category, description, price, shipping_cost, brand, stock_status, shipping_time, active) VALUES
('PrestoTune White-F', 'PIANOS', 'Elegant white finish piano with advanced soundboard technology for superior acoustics.', 350000, 0, 'PrestoTune Pianos', 'IN_STOCK', 5, TRUE),
('Newerton Pro', 'PIANOS', 'Professional studio piano with weighted keys and authentic grand piano sound.', 99900, 0, 'Newerton', 'OUT_OF_STOCK', 5, FALSE),
('StrumVista Blue', 'PIANOS', 'Unique blue finish upright piano with exceptional dynamic range and tone control.', 220000, 0, 'StrumVista Black', 'IN_STOCK', 5, TRUE),
('PrestoTune Grand LX', 'PIANOS', 'Luxury grand piano with handcrafted soundboard and premium ebony keys.', 5000000, 10000, 'PrestoTune Pianos', 'IN_STOCK', 5, TRUE),
('StrumVista Black', 'PIANOS', 'Premium black grand piano with enhanced resonance and sustain.', 999900, 12000, 'StrumVista Guitars', 'IN_STOCK', 5, TRUE),
('EchoLynx White x2', 'PIANOS', 'Compact white piano with dual speaker system for immersive sound experience.', 39900, 2500, 'EchoLynx Crafters', 'IN_STOCK', 5, TRUE),
('EchoLynx Crafters', 'PIANOS', 'Artisan-crafted piano with custom tonewoods for warm, balanced sound.', 49900, 0, 'EchoLynx Crafters', 'OUT_OF_STOCK', 5, FALSE),
('SonataCraft LX red', 'PIANOS', 'Striking red grand piano with concert hall voicing and precision action.', 5559900, 0, 'SonataCraft Pianos', 'IN_STOCK', 5, TRUE),
('Black Upright p44', 'PIANOS', 'Classic upright piano with rich bass response and smooth key action.', 300000, 0, 'Melodique Keys', 'IN_STOCK', 5, TRUE),
('Melodique Baby Grand', 'PIANOS', 'Compact grand piano delivering full-sized performance in smaller spaces.', 139900, 0, 'Melodique Keys', 'IN_STOCK', 5, TRUE),
('Melodique Piano', 'PIANOS', 'Professional upright piano with German hammer action and solid spruce soundboard.', 550000, 0, 'Melodique Keys', 'IN_STOCK', 5, TRUE),
('PrestoTune Klamm-33', 'PIANOS', 'Entry-level digital piano with authentic weighted key feel and multiple voices.', 40000, 0, 'PrestoTune Pianos', 'IN_STOCK', 5, TRUE),
('EchoRidge Keyboard Midi', 'PIANOS', 'Versatile MIDI controller piano with premium keybed and extensive connectivity.', 49900, 5500, 'EchoRidge Keyboards', 'IN_STOCK', 5, TRUE),
('SonataCraft g66', 'PIANOS', 'Handcrafted concert grand with patented sound projection system.', 1200000, 0, 'SonataCraft Pianos', 'IN_STOCK', 5, TRUE),
('FretHarmony', 'PIANOS', 'Studio-quality upright with silent practice system and Bluetooth connectivity.', 99900, 0, 'FretHarmony Instruments', 'IN_STOCK', 5, TRUE),
('StrumVibe', 'PIANOS', 'Modern digital piano with realistic hammer action and onboard lesson functions.', 87500, 1200, 'SoundForge', 'IN_STOCK', 3, TRUE),
('EchoTone', 'PIANOS', 'Vintage-inspired upright piano with warm tonal character and classic styling.', 149900, 2500, 'ClassicKeys Co.', 'OUT_OF_STOCK', 6, FALSE),
('HarmonyFire', 'PIANOS', 'Hybrid piano combining acoustic soundboard with digital versatility.', 79900, 1000, 'Virtuoso Makers', 'IN_STOCK', 2, TRUE),
('BassBloom', 'PIANOS', 'Compact digital piano with exceptional bass response and portable design.', 65900, 900, 'ToneRiver', 'IN_STOCK', 7, TRUE),
('ChordBliss', 'PIANOS', 'Professional stage piano with premium samples and advanced effects.', 132000, 3000, 'ClassicKeys Co.', 'OUT_OF_STOCK', 4, TRUE);

INSERT INTO images (image_id, url, product_id) VALUES
('00000000-0000-0000-0000-000000000001', '/pianos/p-1.jpg', 1),
('00000000-0000-0000-0000-000000000002', '/pianos/p-6.jpg', 1),
('00000000-0000-0000-0000-000000000003', '/pianos/p-7.jpg', 2),
('00000000-0000-0000-0000-000000000004', '/pianos/p-12.jpg', 2),
('00000000-0000-0000-0000-000000000005', '/pianos/p-15.jpg', 3),
('00000000-0000-0000-0000-000000000006', '/pianos/p-19.jpg', 3),

('00000000-0000-0000-0000-000000000007', '/guitars/g-1.jpg', 4),
('00000000-0000-0000-0000-000000000008', '/guitars/g-8.jpg', 4),
('00000000-0000-0000-0000-000000000009', '/guitars/g-5.jpg', 5),
('00000000-0000-0000-0000-000000000010', '/guitars/g-11.jpg', 5),

('00000000-0000-0000-0000-000000000011', '/violins/v-2.jpg', 6),
('00000000-0000-0000-0000-000000000012', '/violins/v-7.jpg', 6);

INSERT INTO images (image_id, url, product_id) VALUES
('00000000-0000-0000-0000-000000000013', '/pianos/p-1.jpg', 4),
('00000000-0000-0000-0000-000000000014', '/pianos/p-6.jpg', 5),
('00000000-0000-0000-0000-000000000015', '/pianos/p-7.jpg', 6),
('00000000-0000-0000-0000-000000000016', '/pianos/p-12.jpg', 7),
('00000000-0000-0000-0000-000000000017', '/pianos/p-15.jpg', 8),
('00000000-0000-0000-0000-000000000018', '/pianos/p-19.jpg', 9),

('00000000-0000-0000-0000-000000000019', '/guitars/g-1.jpg', 10),
('00000000-0000-0000-0000-000000000020', '/guitars/g-8.jpg', 11),
('00000000-0000-0000-0000-000000000021', '/guitars/g-5.jpg', 12),

('00000000-0000-0000-0000-000000000022', '/violins/v-2.jpg', 13),
('00000000-0000-0000-0000-000000000023', '/violins/v-7.jpg', 14),
('00000000-0000-0000-0000-000000000024', '/violins/v-2.jpg', 19 ),
('00000000-0000-0000-0000-000000000025', '/violins/v-2.jpg', 20 );

INSERT INTO images (image_id, url, product_id) VALUES
('00000000-0000-0000-0000-000000000026', '/pianos/p-1.jpg', 15),
('00000000-0000-0000-0000-000000000027', '/pianos/p-6.jpg', 16),
('00000000-0000-0000-0000-000000000028', '/guitars/g-1.jpg', 17),
('00000000-0000-0000-0000-000000000029', '/violins/v-2.jpg', 18);


INSERT INTO users (id, email, password, phone, address, postcode, firstname, lastname, role, active, created_at) VALUES
('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'maria82@example.com', 'passM@123', 123456789, '123 Elm Street, Springfield', '88097', 'Maria', 'Lopez', 'ROLE_USER', TRUE, '2025-05-20 14:12:35'),
('22222222-2222-2222-2222-222222222222', 'jack.r@example.com', 'jackR_!Pass4', 123456789, '456 Oak Avenue, Centerville', '88097', 'Jack', 'Roberts', 'ROLE_USER', TRUE, '2025-05-15 09:33:21'),
('33333333-3333-3333-3333-333333333333', 'li.chen@example.com', 'L1Chen*Pwd', 123456789, '789 Maple Lane, Rivertown', '88097', 'Li', 'Chen', 'ROLE_USER', TRUE, '2025-05-10 17:22:40'),
('44444444-4444-4444-4444-444444444444', 'sophie.c@example.com', 'Soph!eC2025', 123456789, '321 Birch Rd, Hilltown', '88097', 'Sophie', 'Campbell', 'ROLE_USER', TRUE, '2025-05-21 12:05:55'),
('55555555-5555-5555-5555-555555555555', 'daniel.k@example.com', 'DanK#pass1', 123456789, '654 Cedar Street, Lakeside', '88097', 'Daniel', 'Klein', 'ROLE_USER', TRUE, '2025-05-12 08:11:11'),
('66666666-6666-6666-6666-666666666666', 'nina.v@example.com', 'NinaV_22!', 123456789, '213 Spruce Blvd, Newfield', '88097', 'Nina', 'Vargas', 'ROLE_USER', TRUE, '2025-05-19 19:30:00'),
('77777777-7777-7777-7777-777777777777', 'omar.t@example.com', 'OmarT@pw2025', 123456789, '987 Aspen Way, Brookville', '88097', 'Omar', 'Tariq', 'ROLE_USER', TRUE, '2025-05-18 07:45:23'),
('88888888-8888-8888-8888-888888888888', 'emily.b@example.com', 'EmB_pass!', 123456789, '147 Redwood Dr, Milltown', '88097', 'Emily', 'Bennett', 'ROLE_USER', FALSE, '2025-05-22 10:10:10'),
('99999999-9999-9999-9999-999999999999', 'admin.jane@example.com', 'Adm1nJane$', 123456789, '852 Pine St, Cityville', '88097', 'Jane', 'Miller', 'ROLE_ADMIN', TRUE, '2025-05-14 15:00:00'),

('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'user@mail.com', '$2a$10$Xu93DE.ETSXbEGMOJeAT6eUASMcOg9YTzVQ8Rleg2EiwTaP5hHR0.','0432938573', '963 Willow Way, Capitol City', '88097', 'Peo', 'Oneal', 'ROLE_USER', TRUE, '2025-05-16 13:13:13'),
('11111111-1111-1111-1111-111111111111', 'admin@mail.com', '$2a$10$Xu93DE.ETSXbEGMOJeAT6eUASMcOg9YTzVQ8Rleg2EiwTaP5hHR0.','0432938573', '963 Willow Way, Capitol City', '88097', 'Admin', 'Oneal', 'ROLE_ADMIN', TRUE, '2025-05-16 13:13:13');


INSERT INTO orders (
    order_number, user_id, total_order_price,
    ordered_date, delivery_date,
    order_status, shipping_address, payment_method
) VALUES
      ('ORD-1001', '11111111-1111-1111-1111-111111111111',
       2499, '2025-05-21', NULL, 'RECEIVED',
       '123 Elm Street, Springfield', 'PAYPAL'),

      ('ORD-1002', '11111111-1111-1111-1111-111111111111',
       3899, '2025-05-10', '2025-05-15', 'SHIPPING',
       '123 Elm Street, Springfield', 'CREDITCARD'),

      ('ORD-2001', '22222222-2222-2222-2222-222222222222',
       1799, '2025-05-11', NULL, 'RECEIVED',
       '456 Oak Avenue, Centerville', 'BANKTRANSFER'),

      ('ORD-3001', '33333333-3333-3333-3333-333333333333',
       2999, '2025-05-19', NULL, 'SHIPPING',
       '789 Maple Lane, Rivertown', 'PAYPAL'),

      ('ORD-4001', '44444444-4444-4444-4444-444444444444',
       4590, '2025-05-14', NULL, 'RECEIVED',
       '321 Birch Rd, Hilltown', 'CREDITCARD'),

      ('ORD-5001', '55555555-5555-5555-5555-555555555555',
       1349, '2025-05-27', NULL, 'CANCELED',
       '654 Cedar Street, Lakeside', 'PAYPAL'),

      ('ORD-6001', '66666666-6666-6666-6666-666666666666',
       2990, '2025-05-23', '2025-05-26', 'SHIPPING',
       '213 Spruce Blvd, Newfield', 'PAYPAL'),

      ('ORD-7001', '77777777-7777-7777-7777-777777777777',
       1875, '2025-05-09', NULL, 'SHIPPING',
       '987 Aspen Way, Brookville', 'BANKTRANSFER'),

      ('ORD-8001', '88888888-8888-8888-8888-888888888888',
       2490, '2025-05-18', NULL, 'RECEIVED',
       '147 Redwood Dr, Milltown', 'PAYPAL'),

      ('ORD-9001', '99999999-9999-9999-9999-999999999999',
       3250, '2025-05-12', '2025-05-17', 'SHIPPING',
       '852 Pine St, Cityville', 'CREDITCARD'),

      ('ORD-10001', 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa',
       1599, '2025-05-28', NULL, 'RECEIVED',
       '963 Willow Way, Capitol City', 'PAYPAL');


INSERT INTO reviews (review_id, product_id, user_id, rating, comment, created_at) VALUES
('r-001', 1, '11111111-1111-1111-1111-111111111111', 5, 'Fantastic piano! Great sound quality.', '2025-11-27 14:30:00'),
('r-002', 3, '22222222-2222-2222-2222-222222222222', 4, 'Solid performance and beautiful design.', '2025-11-09 09:15:00'),
('r-003', 5, '33333333-3333-3333-3333-333333333333', 3, 'Good but a bit overpriced.', '2025-11-21 16:45:00'),
('r-004', 2, '44444444-4444-4444-4444-444444444444', 5, 'Amazing value for the price.', '2025-12-04 11:20:00'),
('r-005', 7, '55555555-5555-5555-5555-555555555555', 2, 'Not what I expected.', '2025-10-27 08:10:00'),
('r-006', 10, '66666666-6666-6666-6666-666666666666', 4, 'Great instrument, fast shipping.', '2025-12-01 13:25:00'),
('r-007', 14, '77777777-7777-7777-7777-777777777777', 5, 'The best piano I ever bought.', '2025-12-07 10:50:00'),
('r-008', 12, '88888888-8888-8888-8888-888888888888', 3, 'Decent quality.', '2025-11-18 15:30:00'),
('r-009', 18, '99999999-9999-9999-9999-999999999999', 4, 'Quite impressive for the price.', '2025-11-25 12:05:00'),
('r-010', 4, 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 1, 'Very disappointed with the build quality.', '2025-09-29 17:40:00');

INSERT INTO messages (message_id, name, email, subject, message, created_at) VALUES
  ('00000000-0000-0000-0000-000000000001', 'Alice Steiner', 'alice.steiner@example.com',
'Shipping Delay', 'Hi, I have not received my order yet. Can you check?', '2025-05-10 10:15:00'),
  ('00000000-0000-0000-0000-000000000002', 'Mark Weber', 'mark.weber@example.com',
'Product Question', 'Is the PrestoTune White-F suitable for beginners?', '2025-05-11 14:30:00'),
  ('00000000-0000-0000-0000-000000000003', 'Sara Müller', 'sara.mueller@example.com',
NULL, 'Just wanted to say your shop is amazing. Thank you!', '2025-05-12 09:45:00'),
  ('00000000-0000-0000-0000-000000000004', 'Tom Berger', 'tom.berger@example.com',
'Broken Item', 'My violin arrived with a broken string. Can it be replaced?', '2025-05-13 16:10:00'),
  ('00000000-0000-0000-0000-000000000005', 'Nina Krüger', 'nina.krueger@example.com',
'Invoice Request', 'Could you resend my invoice?', '2025-05-13 17:55:00'),
  ('00000000-0000-0000-0000-000000000006', 'David Klein', 'david.klein@example.com',
 'Return Request', 'I want to return a piano I ordered. What is the process?', '2025-05-14 11:05:00'),
  ('00000000-0000-0000-0000-000000000007', 'Julia Hoffmann', 'julia.hoffmann@example.com',
NULL, 'Thank you for the fast and safe delivery!', '2025-05-14 13:40:00'),
  ('00000000-0000-0000-0000-000000000008', 'Jan Lehmann', 'jan.lehmann@example.com',
'Pickup Option', 'Can I pick up the product directly from your store?', '2025-05-15 08:25:00'),
  ('00000000-0000-0000-0000-000000000009', 'Emma Bauer', 'emma.bauer@example.com',
  NULL, 'Thanks for your help earlier! Great customer service.', '2025-05-17 14:50:00'),
  ('00000000-0000-0000-0000-000000000010', 'Tobias König', 'tobias.koenig@example.com',
'Gift Packaging', 'Do you offer gift wrapping for piano purchases?', '2025-05-18 11:35:00');
